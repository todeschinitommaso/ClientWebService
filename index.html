<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Client per Servizio Web</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<style>
  body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #fff;
  }
  .container {
      display: flex;
      max-width: 1200px;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #333;
      border-radius: 5px;
      background-color: #121212;
      flex-direction: column; /* Aggiunto per centrare verticalmente */
      justify-content: center; /* Aggiunto per centrare verticalmente */
      align-items: center; /* Aggiunto per centrare verticalmente */
  }
  .column {
      flex: 1;
      padding: 10px;
  }
  h1, h2 {
      text-align: center;
      color: #4aa0e6;
  }
  button {
      margin-top: 10px;
      padding: 8px 20px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
  }
  button:hover {
      background-color: #0056b3;
  }
  form {
      margin-top: 20px;
  }
  form label {
      display: block;
      margin-bottom: 5px;
      color: #ccc;
  }
  form input[type="text"],
  form input[type="email"],
  form input[type="number"],
  form input[type="date"] {
      width: calc(100% - 20px);
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #222;
      color: #fff;
      box-sizing: border-box;
  }
  #output {
      padding: 10px;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #222;
      color: #fff;
  }
  .error {
      color: #ff5555;
      margin-top: 5px;
  }
  .menu-buttons {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
  }
  .menu-buttons button {
      margin: 0 10px;
  }
  .hidden {
      display: none;
  }
</style>
</head>
<body>
<div class="container">
  <div class="column">
      <div class="menu-buttons">
          <button onclick="showForm('getDataForm')">GET METHOD</button>
          <button onclick="showForm('addDataForm')">ADD METHOD</button>
          <button onclick="showForm('updateDataForm')">UPDATE METHOD</button>
          <button onclick="showForm('deleteDataForm')">DELETE METHOD</button>
      </div>
      <div id="getDataForm" class="form-container">
          <form>
              <h2>GET METHOD</h2>
              <label for="id">ID:</label>
              <input type="number" id="id" name="id" min="1">
              <button type="button" onclick="getData()">GET</button>
          </form>
      </div>
      <div id="addDataForm" class="form-container hidden">
          <form>
              <h2>ADD METHOD</h2>
              <label for="nome">NAME:</label>
              <input type="text" id="nome" name="nome" required>
              <label for="cognome">SURNAME:</label>
              <input type="text" id="cognome" name="cognome" required>
              <label for="email">EMAIL:</label>
              <input type="email" id="email" name="email" required>
              <label for="eta">AGE:</label>
              <input type="number" id="eta" name="eta" min="1" required>
              <label for="data_iscrizione">SUBSCRIPTION DATE:</label>
              <input type="date" id="data_iscrizione" name="data_iscrizione" required>
              <button type="button" onclick="addData()">ADD</button>
          </form>
      </div>
      <div id="updateDataForm" class="form-container hidden">
          <form>
              <h2>UPDATE METHOD</h2>
              <label for="updateId">ID:</label>
              <input type="number" id="updateId" name="id" min="1">
              <label for="updateNome">NAME:</label>
              <input type="text" id="updateNome" name="nome">
              <label for="updateCognome">SURNAME:</label>
              <input type="text" id="updateCognome" name="cognome">
              <label for="updateEmail">EMAIL:</label>
              <input type="email" id="updateEmail" name="email">
              <label for="updateEta">AGE:</label>
              <input type="number" id="updateEta" name="eta" min="1">
              <label for="updateDataIscrizione">SUBSCRIPTION DATE:</label>
              <input type="date" id="updateDataIscrizione" name="data_iscrizione">
              <button type="button" onclick="updateData()">UPDATE</button>
          </form>
      </div>
      <div id="deleteDataForm" class="form-container hidden">
          <form>
              <h2>DELETE METHOD</h2>
              <label for="deleteId">ID:</label>
              <input type="number" id="deleteId" name="id" min="1">
              <button type="button" onclick="deleteData()">DELETE</button>
          </form>
      </div>
  </div>
  <div class="column">
      <h2>RESULTS</h2>
      <div id="response"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
      function showForm(formId) {
      const forms = document.querySelectorAll('.form-container');
      forms.forEach(form => {
        if (form.id === formId) {
          form.classList.remove('hidden');
        } else {
          form.classList.add('hidden');
        }
      });
    }

    flatpickr('.flatpickr', {
        dateFormat: "Y-m-d",
    });

    function getData() {
        var id = document.getElementById("id").value;
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("response").innerHTML = formatResponse(this.responseText);
            }
        };
        xhr.open("GET", "index.php/" + id, true);
        xhr.send();
        clearInputs();
    }

    function addData() {
        var data = {
            nome: document.getElementById("nome").value,
            cognome: document.getElementById("cognome").value,
            email: document.getElementById("email").value,
            eta: document.getElementById("eta").value,
            data_iscrizione: document.getElementById("data_iscrizione").value
        };
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (this.readyState == 4) {
                document.getElementById("response").innerHTML = formatResponse(this.responseText);
            }
        };
        xhr.open("POST", "index.php", true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send(JSON.stringify(data));
        clearInputs();
    }

    function updateData() {
        var id = document.getElementById("id").value;
        var data = {
            nome: document.getElementById("nome").value,
            cognome: document.getElementById("cognome").value,
            email: document.getElementById("email").value,
            eta: document.getElementById("eta").value,
            data_iscrizione: document.getElementById("data_iscrizione").value
        };
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (this.readyState == 4) {
                document.getElementById("response").innerHTML = formatResponse(this.responseText);
            }
        };
        xhr.open("PUT", "index.php/" + id, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send(JSON.stringify(data));
        clearInputs();
    }

    function deleteData() {
        var id = document.getElementById("id").value;
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (this.readyState == 4) {
                document.getElementById("response").innerHTML = formatResponse(this.responseText);
            }
        };
        xhr.open("DELETE", "index.php/" + id, true);
        xhr.send();
        clearInputs();
    }

    function clearInputs() {
        document.getElementById("id").value = "";
        document.getElementById("nome").value = "";
        document.getElementById("cognome").value = "";
        document.getElementById("email").value = "";
        document.getElementById("eta").value = "";
        document.getElementById("data_iscrizione").value = "";
    }

    function formatResponse(response) {
        try {
            var data = JSON.parse(response);
            return JSON.stringify(data, null, 2);
        } catch (error) {
            return response;
        }
    }
</script>

</body>
</html>